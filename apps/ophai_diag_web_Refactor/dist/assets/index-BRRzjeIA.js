import{cr as ce,aL as H,cs as fe,b6 as I,ct as de,a0 as W,an as M,X as N,by as X,bV as re,v as ae,d as ie,H as V,Z as B,u as O,a8 as le,a4 as J,F as ve,ao as pe,s as Ee,t as me,a as Te,o as be,cu as ye,J as Fe}from"./index-BAZJoe5d.js";var ge=/\s/;function he(e){for(var t=e.length;t--&&ge.test(e.charAt(t)););return t}var _e=/^\s+/;function Se(e){return e&&e.slice(0,he(e)+1).replace(_e,"")}var Y=NaN,we=/^[-+]0x[0-9a-f]+$/i,Pe=/^0b[01]+$/i,Ie=/^0o[0-7]+$/i,Le=parseInt;function Z(e){if(typeof e=="number")return e;if(ce(e))return Y;if(H(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=H(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Se(e);var n=Pe.test(e);return n||Ie.test(e)?Le(e.slice(2),n?2:8):we.test(e)?Y:+e}var K=function(){return fe.Date.now()},Ce="Expected a function",Oe=Math.max,Ae=Math.min;function Ge(e,t,n){var s,r,c,f,u,E,m=0,g=!1,T=!1,h=!0;if(typeof e!="function")throw new TypeError(Ce);t=Z(t)||0,H(n)&&(g=!!n.leading,T="maxWait"in n,c=T?Oe(Z(n.maxWait)||0,t):c,h="trailing"in n?!!n.trailing:h);function _(i){var p=s,b=r;return s=r=void 0,m=i,f=e.apply(b,p),f}function o(i){return m=i,u=setTimeout(d,t),g?_(i):f}function a(i){var p=i-E,b=i-m,w=t-p;return T?Ae(w,c-b):w}function l(i){var p=i-E,b=i-m;return E===void 0||p>=t||p<0||T&&b>=c}function d(){var i=K();if(l(i))return v(i);u=setTimeout(d,a(i))}function v(i){return u=void 0,h&&s?_(i):(s=r=void 0,f)}function L(){u!==void 0&&clearTimeout(u),m=0,s=E=r=u=void 0}function C(){return u===void 0?f:v(K())}function S(){var i=K(),p=l(i);if(s=arguments,r=this,E=i,p){if(u===void 0)return o(E);if(T)return clearTimeout(u),u=setTimeout(d,t),_(E)}return u===void 0&&(u=setTimeout(d,t)),f}return S.cancel=L,S.flush=C,S}const Re=(e,t)=>{if(!I)return!1;const n={undefined:"overflow",true:"overflow-y",false:"overflow-x"}[String(t)],s=de(e,n);return["scroll","auto","overlay"].some(r=>s.includes(r))},Qe=(e,t)=>{if(!I)return;let n=e;for(;n;){if([window,document,document.documentElement].includes(n))return window;if(Re(n,t))return n;n=n.parentNode}return n};function et(e,t){if(!I)return;if(!t){e.scrollTop=0;return}const n=[];let s=t.offsetParent;for(;s!==null&&e!==s&&e.contains(s);)n.push(s),s=s.offsetParent;const r=t.offsetTop+n.reduce((E,m)=>E+m.offsetTop,0),c=r+t.offsetHeight,f=e.scrollTop,u=f+e.clientHeight;r<f?e.scrollTop=r:c>u&&(e.scrollTop=c-e.clientHeight)}const ke=e=>{if(e.tabIndex>0||e.tabIndex===0&&e.getAttribute("tabIndex")!==null)return!0;if(e.tabIndex<0||e.hasAttribute("disabled")||e.getAttribute("aria-disabled")==="true")return!1;switch(e.nodeName){case"A":return!!e.href&&e.rel!=="ignore";case"INPUT":return!(e.type==="hidden"||e.type==="file");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},$="focus-trap.focus-after-trapped",D="focus-trap.focus-after-released",Ne="focus-trap.focusout-prevented",z={cancelable:!0,bubbles:!1},xe={cancelable:!0,bubbles:!1},G="focusAfterTrapped",Q="focusAfterReleased",Ue=Symbol("elFocusTrap"),j=N(),x=N(0),q=N(0);let A=0;const ue=e=>{const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const r=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||r?NodeFilter.FILTER_SKIP:s.tabIndex>=0||s===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t},ee=(e,t)=>{for(const n of e)if(!Be(n,t))return n},Be=(e,t)=>{if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1},Ke=e=>{const t=ue(e),n=ee(t,e),s=ee(t.reverse(),e);return[n,s]},$e=e=>e instanceof HTMLInputElement&&"select"in e,F=(e,t)=>{if(e&&e.focus){const n=document.activeElement;let s=!1;X(e)&&!ke(e)&&!e.getAttribute("tabindex")&&(e.setAttribute("tabindex","-1"),s=!0),e.focus({preventScroll:!0}),q.value=window.performance.now(),e!==n&&$e(e)&&t&&e.select(),X(e)&&s&&e.removeAttribute("tabindex")}};function te(e,t){const n=[...e],s=e.indexOf(t);return s!==-1&&n.splice(s,1),n}const De=()=>{let e=[];return{push:s=>{const r=e[0];r&&s!==r&&r.pause(),e=te(e,s),e.unshift(s)},remove:s=>{var r,c;e=te(e,s),(c=(r=e[0])==null?void 0:r.resume)==null||c.call(r)}}},He=(e,t=!1)=>{const n=document.activeElement;for(const s of e)if(F(s,t),document.activeElement!==n)return},ne=De(),Ve=()=>x.value>q.value,R=()=>{j.value="pointer",x.value=window.performance.now()},se=()=>{j.value="keyboard",x.value=window.performance.now()},We=()=>(W(()=>{A===0&&(document.addEventListener("mousedown",R),document.addEventListener("touchstart",R),document.addEventListener("keydown",se)),A++}),M(()=>{A--,A<=0&&(document.removeEventListener("mousedown",R),document.removeEventListener("touchstart",R),document.removeEventListener("keydown",se))}),{focusReason:j,lastUserFocusTimestamp:x,lastAutomatedFocusTimestamp:q}),k=e=>new CustomEvent(Ne,{...xe,detail:e});let P=[];const oe=e=>{e.code===re.esc&&P.forEach(t=>t(e))},Me=e=>{W(()=>{P.length===0&&document.addEventListener("keydown",oe),I&&P.push(e)}),M(()=>{P=P.filter(t=>t!==e),P.length===0&&I&&document.removeEventListener("keydown",oe)})},je=ie({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[G,Q,"focusin","focusout","focusout-prevented","release-requested"],setup(e,{emit:t}){const n=N();let s,r;const{focusReason:c}=We();Me(o=>{e.trapped&&!f.paused&&t("release-requested",o)});const f={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},u=o=>{if(!e.loop&&!e.trapped||f.paused)return;const{code:a,altKey:l,ctrlKey:d,metaKey:v,currentTarget:L,shiftKey:C}=o,{loop:S}=e,i=a===re.tab&&!l&&!d&&!v,p=document.activeElement;if(i&&p){const b=L,[w,U]=Ke(b);if(w&&U){if(!C&&p===U){const y=k({focusReason:c.value});t("focusout-prevented",y),y.defaultPrevented||(o.preventDefault(),S&&F(w,!0))}else if(C&&[w,b].includes(p)){const y=k({focusReason:c.value});t("focusout-prevented",y),y.defaultPrevented||(o.preventDefault(),S&&F(U,!0))}}else if(p===b){const y=k({focusReason:c.value});t("focusout-prevented",y),y.defaultPrevented||o.preventDefault()}}};pe(Ue,{focusTrapRef:n,onKeydown:u}),B(()=>e.focusTrapEl,o=>{o&&(n.value=o)},{immediate:!0}),B([n],([o],[a])=>{o&&(o.addEventListener("keydown",u),o.addEventListener("focusin",g),o.addEventListener("focusout",T)),a&&(a.removeEventListener("keydown",u),a.removeEventListener("focusin",g),a.removeEventListener("focusout",T))});const E=o=>{t(G,o)},m=o=>t(Q,o),g=o=>{const a=O(n);if(!a)return;const l=o.target,d=o.relatedTarget,v=l&&a.contains(l);e.trapped||d&&a.contains(d)||(s=d),v&&t("focusin",o),!f.paused&&e.trapped&&(v?r=l:F(r,!0))},T=o=>{const a=O(n);if(!(f.paused||!a))if(e.trapped){const l=o.relatedTarget;!le(l)&&!a.contains(l)&&setTimeout(()=>{if(!f.paused&&e.trapped){const d=k({focusReason:c.value});t("focusout-prevented",d),d.defaultPrevented||F(r,!0)}},0)}else{const l=o.target;l&&a.contains(l)||t("focusout",o)}};async function h(){await J();const o=O(n);if(o){ne.push(f);const a=o.contains(document.activeElement)?s:document.activeElement;if(s=a,!o.contains(a)){const d=new Event($,z);o.addEventListener($,E),o.dispatchEvent(d),d.defaultPrevented||J(()=>{let v=e.focusStartEl;ve(v)||(F(v),document.activeElement!==v&&(v="first")),v==="first"&&He(ue(o),!0),(document.activeElement===a||v==="container")&&F(o)})}}}function _(){const o=O(n);if(o){o.removeEventListener($,E);const a=new CustomEvent(D,{...z,detail:{focusReason:c.value}});o.addEventListener(D,m),o.dispatchEvent(a),!a.defaultPrevented&&(c.value=="keyboard"||!Ve()||o.contains(document.activeElement))&&F(s??document.body),o.removeEventListener(D,m),ne.remove(f)}}return W(()=>{e.trapped&&h(),B(()=>e.trapped,o=>{o?h():_()})}),M(()=>{e.trapped&&_(),n.value&&(n.value.removeEventListener("keydown",u),n.value.removeEventListener("focusin",g),n.value.removeEventListener("focusout",T),n.value=void 0)}),{onKeydown:u}}});function qe(e,t,n,s,r,c){return V(e.$slots,"default",{handleKeydown:e.onKeydown})}var tt=ae(je,[["render",qe],["__file","focus-trap.vue"]]);const Xe=Ee({to:{type:me([String,Object]),required:!0},disabled:Boolean}),Je=ie({__name:"teleport",props:Xe,setup(e){return(t,n)=>t.disabled?V(t.$slots,"default",{key:0}):(be(),Te(ye,{key:1,to:t.to},[V(t.$slots,"default")],8,["to"]))}});var Ye=ae(Je,[["__file","teleport.vue"]]);const nt=Fe(Ye);export{tt as E,nt as a,Ge as d,Qe as g,ke as i,et as s,F as t};
